YUI.add("inputex-calendarNavigationPlugin",function(e,t){function r(e){r.superclass.constructor.call(this,e)}var n=e.inputEx;r.NAME="calendarNavigationPlugin",r.NS="calNavPlug",n.CalendarNavigationPlugin=e.extend(r,e.Plugin.Base,{initializer:function(e){this.options=e,this.datepicker=e.datepicker,this.options.mask=e.mask?e.mask:"content";var t=0,n,r=this.get("string").monthsList,i=this.monthsField=[];for(t=0;t<12;t++)n=r[t],i.push({label:n,value:t});this.bindUI()},bindUI:function(){var t=this;this.get("host").get("boundingBox").delegate("click",e.bind(this.onHeaderClick,this),".yui3-calendar-header-label"),this.datepicker&&this._getOverlay().get("boundingBox").on("mousedownoutside",function(e){t._isPanelVisible()&&e.stopImmediatePropagation()})},onHeaderClick:function(){var t=this,n,r,i=this.get("string");this.panelField?this.showPanel():(this.calendarBoundingBox=this.get("host").get("boundingBox"),this.calendarContentBox=this.get("host").get("contentBox"),this.selectPanelBoundingBox=e.Node.create('<div class="inputex-select-panel-boundingbox"></div>'),this.selectPanelContentBox=e.Node.create('<div class="inputex-select-panel-contentbox"></div>'),this.calendarBoundingBox.append(this.selectPanelBoundingBox),n={type:"group",fields:[{type:"select",name:"month",label:i.month,choices:this.monthsField},{className:"select-year",name:"year",label:i.year,required:!0,showMsg:!0,regexp:/^[0-9]{4}$/,value:this.get("host").get("date").getFullYear()}]},r={boundingBox:this.selectPanelBoundingBox,contentBox:this.selectPanelContentBox,centered:this.calendarContentBox,headerContent:i.select,inputEx:n,label:"label",modal:!0,zIndex:5,hideOn:[{}],buttons:[{value:i.ok,section:e.WidgetStdMod.FOOTER,classNames:"ok-button",action:e.bind(this.saveAndHidePanel,this)},{value:i.cancel,section:e.WidgetStdMod.FOOTER,action:e.bind(this.cancelAndHidePanel,this)}]},this.renderComponent(r)),this.options.mask==="content"&&e.one(".yui3-widget-mask").setStyle("position","absolute"),this.selectPanelBoundingBox.align.center(this.calendarContentBox),this.calendarBoundingBox.on("keyup",function(e){t._isPanelVisible()&&e.keyCode===13&&t.saveAndHidePanel(e)}),this.set("panel",this.panelField)},_getOverlay:function(){return this.datepicker.oOverlay},_isPanelVisible:function(){var e=this.get("panel"),t;return e&&(t=e.get("visible")),t},saveAndHidePanel:function(e){e.halt(!0);if(this.validateFormInPanel()){var t=this.get("host").get("date"),n=this.get("panel"),r=n.get("field").getValue();t.setMonth(r.month),r.year&&t.setFullYear(r.year),this.get("host").set("date",t),this.hidePanel()}},cancelAndHidePanel:function(e){e.halt(!0),this.hidePanel()},validateFormInPanel:function(){return this.get("panel").get("field").validate()},hidePanel:function(){this.get("panel").hide()},showPanel:function(){this.get("panel").show()},renderComponent:function(t){this.panelField=new n.Panel(t),this.selectPanelBoundingBox.plug(e.Plugin.Align),this.panelField.render()}},{ATTRS:{string:{valueFn:function(){return e.Intl.get("inputex-calendarNavigationPlugin")}},panel:{}}})},"@VERSION@",{requires:["intl","plugin","inputex-panel","inputex-group","inputex-select","inputex-string","align-plugin"],skinnable:!0,lang:["en","fr"]});
