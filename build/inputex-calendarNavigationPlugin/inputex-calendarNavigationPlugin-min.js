YUI.add("inputex-calendarNavigationPlugin",function(t,n){function i(e){i.superclass.constructor.call(this,e)}var r=t.inputEx;i.NAME="calendarNavigationPlugin",i.NS="calNavPlug",r.CalendarNavigationPlugin=t.extend(i,t.Plugin.Base,{initializer:function(e){this.panelOptions=e,this.datepicker=e.datepicker;var t=0,n,r=this.get("string").monthsList,i=this.monthsField=[];for(t=0;t<12;t++)n=r[t],i.push({label:n,value:t});this.bindUI()},bindUI:function(){var e=this;this.get("host").get("boundingBox").delegate("click",t.bind(this.onHeaderClick,this),".yui3-calendar-header-label"),this._getOverlay().get("boundingBox").on("mousedownoutside",function(t){e._isPanelVisible()&&t.stopImmediatePropagation()})},onHeaderClick:function(){var e=this,n,r,i=this.get("string");this.panelField?this.showPanel():(this.calendarBoundingBox=this.get("host").get("boundingBox"),this.calendarContentBox=this.get("host").get("contentBox"),this.selectPanelBoundingBox=t.Node.create('<div class="inputex-select-panel-boundingbox"></div>'),this.selectPanelContentBox=t.Node.create('<div class="inputex-select-panel-contentbox"></div>'),this.calendarBoundingBox.append(this.selectPanelBoundingBox),n={type:"group",fields:[{type:"select",name:"month",label:i.month,choices:this.monthsField},{className:"select-year",name:"year",label:i.year,required:!0,showMsg:!0,regexp:/^[0-9]{4}$/,value:this.get("host").get("date").getFullYear()}]},r={boundingBox:this.selectPanelBoundingBox,contentBox:this.selectPanelContentBox,centered:this.calendarContentBox,headerContent:i.select,inputEx:n,label:"label",modal:!0,zIndex:5,hideOn:[{}],buttons:[{value:i.ok,section:t.WidgetStdMod.FOOTER,classNames:"ok-button",action:t.bind(this.saveAndHidePanel,this)},{value:i.cancel,section:t.WidgetStdMod.FOOTER,action:function(){e.hidePanel()}}]},this.renderComponent(r)),this.selectPanelBoundingBox.align.center(this.calendarContentBox),this.calendarBoundingBox.on("keyup",function(t){e._isPanelVisible()&&t.keyCode===13&&e.saveAndHidePanel()}),this.set("panel",this.panelField)},_getOverlay:function(){return this.datepicker.oOverlay},_isPanelVisible:function(){var e=this.get("panel"),t;return e&&(t=e.get("visible")),t},saveAndHidePanel:function(){e.halt(!0);if(this.validateFormInPanel()){var t=this.get("host").get("date"),n=this.get("panel"),r=n.get("field").getValue();t.setMonth(r.month),r.year&&t.setFullYear(r.year),this.get("host").set("date",t),this.hidePanel()}},validateFormInPanel:function(){return this.get("panel").get("field").validate()},hidePanel:function(){this.get("panel").hide()},showPanel:function(){this.get("panel").show()},renderComponent:function(e){this.panelField=new r.Panel(e),this.selectPanelBoundingBox.plug(t.Plugin.Align),this.panelField.render()}},{ATTRS:{string:{valueFn:function(){return t.Intl.get("inputex-calendarNavigationPlugin")}},panel:{}}})},"@VERSION@",{requires:["intl","plugin","inputex-panel","inputex-group","inputex-select","align-plugin"],skinnable:!0,lang:["en","fr"]});
