YUI.add("inputex-ratingstars",function(e,t){YUI.add("inputex-ratingstars",function(e){var t=e.Lang,n=e.inputEx;n.RatingStars=function(e){n.RatingStars.superclass.constructor.call(this,e),this.resetStars()},e.extend(n.RatingStars,n.Field,{setOptions:function(e){n.RatingStars.superclass.setOptions.call(this,e),t.isArray(e.nStars)&&e.nStars[0]&&t.isString(e.nStars[0])?(this.options.nStars=e.nStars.length,this.options.starsMessages=e.nStars):this.options.nStars=e.nStars||5,this.options.averageValue=t.isNumber(e.averageValue)?Math.round(e.averageValue*10)/10:null,this.options.disableRate=e.disableRate||!1,this.options.nRates=e.nRates,this.options.name=e.name||"stars",this.dontReset=!1,this.disabled=e.disabled||!1,this.options.message=e.message||n.messages.ratingMsg,this.options.disableMessage=e.disableMessage,this.options.className=e.className?e.className:"inputEx-Field inputEx-RatingStars",this.setMessage()},setMessage:function(){var e=this.options.message.split("%");this.options.message="",this.options.averageValue&&(this.options.message=this.options.message+e[0]+this.options.averageValue+"/"+this.options.nStars),this.options.nRates&&(this.options.message=this.options.message+e[1]+this.options.nRates+e[2])},renderComponent:function(){this.starsEls=[],this.el=n.cn("div");for(var t=0;t<this.options.nStars;t++){var r=n.cn("div",{id:"star-"+t,className:"inputEx-star"}),i=this;r.index=t,r.onHover=function(){i.onHoverStar(this.index)},r.onClick=function(){i.onClickRating(this.index+1)},this.starsEls.push(r);var s=n.cn("a",{href:"#"+t},null,t);r.appendChild(s),this.el.appendChild(r),e.one(r).on("mouseover",r.onHover,r,!0),e.one(r).on("click",r.onClick,r,!0)}e.one(this.el).on("mouseout",this.resetStars,this,!0),this.fieldContainer.appendChild(this.el),this.divMess=this.fieldContainer.appendChild(n.cn("div",{id:this.divEl.id+"-mess",className:"inputEx-message"},null,this.options.message))},onHoverStar:function(t){if(!this.disabled){if(!this.value)for(var n=0;n<this.options.nStars;n++){var r=this.starsEls[n],i=r.firstChild;n<t+1?(e.one(r).addClass("hover"),e.one(i).setStyle("width","100%")):(e.one(r).removeClass("on"),e.one(r).removeClass("hover"))}this.options.starsMessages&&this.showMessage('<span class="inputEx-starMess">'+this.options.starsMessages[t]+"</span>")}else this.options.disableMessage&&this.showMessage('<span class="inputEx-disableMessage">'+this.options.disableMessage+"</span>")},initEvents:function(e,t){this.publish("rateEvt")},resetStars:function(n){if(this.dontReset)return;var r=t.isNumber(n)?n:this.options.averageValue,i=Math.floor(r),s=Math.floor((this.options.averageValue-i)*10),o;s>0&&(i+=1,o=s+"0%");for(var u=0;u<this.options.nStars;u++){var a=this.starsEls[u],f=a.firstChild;e.one(a).removeClass("hover"),u<i?e.one(a).addClass("on"):e.one(a).removeClass("on"),u==i-1&&o&&e.one(f).setStyle("width",o)}this.showMessage()},showMessage:function(e){if(!e)var e=this.options.message;this.divMess.innerHTML=e},onAsync:function(){this.showMessage('<span class="thanks">'+n.messages.sendingRate+"</span>")},onEndAsync:function(){this.afterRating()},onClickRating:function(e){if(this.disabled)return;this.setValue(e),this.dontReset=!0,this.disable(),this.fire("rate",e)},afterRating:function(){this.showMessage('<span class="thanks">'+n.messages.thanksRate+"</span>")},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},setValue:function(e){n.RatingStars.superclass.setValue.call(this,e),this.value=e},getValue:function(){return this.value}}),n.registerType("ratingstars",n.RatingStars)},"3.1.0",{requires:["inputex-field"]})},"@VERSION@");
