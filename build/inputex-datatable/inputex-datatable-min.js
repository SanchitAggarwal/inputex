YUI.add("inputex-datatable",function(e,t){YUI.add("inputex-datatable",function(e){var t=e.inputEx,n=e.inputEx.messages;e.namespace("inputEx.Plugin"),t.Plugin.InputExDataTable=function(e){t.Plugin.InputExDataTable.superclass.constructor.call(this,e)},t.Plugin.InputExDataTable.NS="InputExDataTable",e.extend(t.Plugin.InputExDataTable,e.Plugin.Base,{initializer:function(){var e=this.get("host");this.enrichData(),this.enrichColumns(),this.addAddButton(),this.get("disableModifyFunc")||e.delegate("click",this.modifyRecord,"td.inputEx-DataTable-modify",this),this.get("disableDeleteFunc")||e.delegate("click",this.deleteRecord,"td.inputEx-DataTable-delete",this)},enrichData:function(e){var t=this,n=this.get("host").get("data");n.each(function(e){this.get("disableModifyFunc")||t.addModifyAttr(e),this.get("disableDeleteFunc")||t.addDeleteAttr(e)})},enrichColumns:function(){this.get("disableModifyFunc")||this.addModifyColumn(),this.get("disableDeleteFunc")||this.addDeleteColumn()},addAddButton:function(){if(!this.get("disableAddFunc")){var t=e.Node.create("<button id='addButton'>"+n.addButtonText+"</button"),r=this.get("panel");this.get("host").get("contentBox").append(t),t.on("click",function(e){r.set("headerContent",n.addItemHeader),r.get("field").clear(),r.show()},this)}},modifyRecord:function(e){e.stopPropagation();var t=this.get("host").getRecord(e.currentTarget),r=this.get("panel");r.set("headerContent",n.modifyItemHeader),r.get("field").setValue(t.getAttrs()),r.show()},deleteRecord:function(e){e.stopPropagation();var t=this.get("host").getRecord(e.currentTarget);(!this.get("confirmDelete")||confirm(n.confirmDeletion))&&this.get("host").get("data").remove(t)},deleteExtraColumns:function(){this.get("disableModifyFunc")||this.removeModifyColumn(),this.get("disableDeleteFunc")||this.removeDeleteColumn()},_initPanel:function(){var t=this,r=new e.inputEx.Panel({centered:!0,width:500,modal:!0,zIndex:5,visible:!1,inputEx:t.get("inputEx"),buttons:[{value:n.cancelText,action:function(e){e.preventDefault(),r.hide()}},{value:n.saveText,action:function(e){e.preventDefault();var n=t.get("panel").get("field"),i=n.getValue(),s=t.get("host"),o;if(n.validate()){if(i.id)s.get("data").getById(i.id).setAttrs(i);else{i.id=t.generateId(t.get("idSize"));var u=s.get("recordType");o=new u,o.setAttrs(i),t.addModifyAttr(o),t.addDeleteAttr(o),s.get("data").add(o)}r.hide()}}}]});return r.render(),r},destructor:function(){var t=this,n=this.get("host").get("data");n.each(function(e){this.get("disableModifyFunc")||t.delModifyAttr(e),this.get("disableDeleteFunc")||t.delDeleteAttr(e)}),this.deleteExtraColumns(),this.get("disableAddFunc")||e.one("#addButton").remove(),this.get("panel").destroy()},addModifyAttr:function(e){e.addAttr("modify")},addDeleteAttr:function(e){e.addAttr("delete")},delModifyAttr:function(e){e.removeAttr("modify")},delDeleteAttr:function(e){e.removeAttr("delete")},addModifyColumn:function(){this.get("host").addColumn({key:this.get("modifyColumnLabel"),className:"inputEx-DataTable-modify"})},addDeleteColumn:function(){this.get("host").addColumn({key:this.get("deleteColumnLabel"),className:"inputEx-DataTable-delete"})},removeModifyColumn:function(){this.get("host").removeColumn("modify")},removeDeleteColumn:function(){this.get("host").removeColumn("delete")},generateId:function(e){var t=this.get("prefixId"),n=e?e:5;return t=t?t:"",t+Math.floor(Math.random()*Math.pow(10,n))}},{ATTRS:{inputEx:{},prefixId:{value:""},idSize:{value:5},disableAddFunc:{value:!1},disableModifyFunc:{value:!1},disableDeleteFunc:{value:!1},modifyColumnLabel:{value:n.modifyText},deleteColumnLabel:{value:n.deleteText},confirmDelete:{value:!0},panel:{valueFn:"_initPanel",lazyAdd:!0}}})},"",{requires:["inputex-group","inputex-panel","datatable"]})},"@VERSION@");
