YUI.add("inputex-password",function(e,t){YUI.add("inputex-password",function(e){var t=e.inputEx,n=e.Lang;t.PasswordField=function(e){t.PasswordField.superclass.constructor.call(this,e)},t.PasswordField.byId={},e.extend(t.PasswordField,t.StringField,{setOptions:function(e){t.PasswordField.superclass.setOptions.call(this,e),this.options.className=e.className?e.className:"inputEx-Field inputEx-PasswordField",this.options.regexp=e.regexp||t.regexps.password,this.options.strengthIndicator=n.isUndefined(e.strengthIndicator)?!1:e.strengthIndicator,this.options.capsLockWarning=n.isUndefined(e.capsLockWarning)?!1:e.capsLockWarning,t.PasswordField.byId[e.id]=this;var r;e.confirm&&(r=t.PasswordField.byId[e.confirm])&&this.setConfirmationField(r)},renderComponent:function(){this.wrapEl=t.cn("div",{className:"inputEx-StringField-wrapper"});var n={};n.type="password",n.size=this.options.size,this.options.name&&(n.name=this.options.name),this.el=t.cn("input",n),this.wrapEl.appendChild(this.el),this.fieldContainer.appendChild(this.wrapEl),this.options.capsLockWarning&&(this.capsLockWarning=t.cn("div",{className:"capsLockWarning"},{display:"none"},t.messages.capslockWarning),this.wrapEl.appendChild(this.capsLockWarning));if(this.options.strengthIndicator){this.strengthEl=t.cn("div",{className:"inputEx-Password-StrengthIndicator"},null,t.messages.passwordStrength),this.strengthBlocks=[];for(var r=0;r<4;r++){var i=t.cn("div",{className:"inputEx-Password-StrengthIndicatorBlock"});this.strengthEl.appendChild(i),this.strengthBlocks[r]=e.one(i)}this.wrapEl.appendChild(this.strengthEl)}},setConfirmationField:function(e){this.options.confirmPasswordField=e,this.options.messages.invalid=t.messages.invalidPasswordConfirmation,this.options.confirmPasswordField.options.confirmationPasswordField=this},validate:function(){return this.options.confirmPasswordField&&this.options.confirmPasswordField.getValue()!=this.getValue()?!1:t.PasswordField.superclass.validate.call(this)},getStateString:function(e){return e==t.stateInvalid&&this.options.minLength&&this.el.value.length<this.options.minLength?t.messages.invalidPassword[0]+this.options.minLength+t.messages.invalidPassword[1]:t.StringField.superclass.getStateString.call(this,e)},onInput:function(e){t.PasswordField.superclass.onInput.call(this,e),this.options.confirmationPasswordField&&this.options.confirmationPasswordField.setClassFromState()},onKeyPress:function(e){t.PasswordField.superclass.onKeyPress.call(this,e);if(this.options.capsLockWarning){var n=e?e:window.event;if(!n)return;var r=n.target?n.target:n.srcElement,i=-1;n.which?i=n.which:n.keyCode&&(i=n.keyCode);var s=!1;n.shiftKey?s=n.shiftKey:n.modifiers&&(s=!!(n.modifiers&4));var o=i>=65&&i<=90&&!s||i>=97&&i<=122&&s;this.setCapsLockWarning(o)}},onKeyUp:function(e){t.PasswordField.superclass.onKeyUp.call(this,e),this.options.strengthIndicator&&n.later(0,this,this.updateStrengthIndicator)},setCapsLockWarning:function(e){this.capsLockWarning.style.display=e?"":"none"},updateStrengthIndicator:function(){var e=t.PasswordField.getPasswordStrength(this.getValue()),n,r,i;for(n=0;n<4;n++)r=e>=n*25&&e>0,i=r?"#4AE817":"#FFFFFF",this.strengthBlocks[n].setStyle("backgroundColor",i)}}),t.PasswordField.getPasswordStrength=function(e){var t=e.length;t>7&&(t=7);var n=e.replace(/[0-9]/g,""),r=e.length-n.length;r>3&&(r=3);var i=e.replace(/\W/g,""),s=e.length-i.length;s>3&&(s=3);var o=e.replace(/[A-Z]/g,""),u=e.length-o.length;u>3&&(u=3);var a=t*10-20+r*10+s*20+u*10;return a<0&&(a=0),a>100&&(a=100),a},t.registerType("password",t.PasswordField,[{type:"boolean",label:"Strength indicator",name:"strengthIndicator",value:!1},{type:"boolean",label:"CapsLock warning",name:"capsLockWarning",value:!1}])},"3.1.0",{requires:["inputex-string"]})},"@VERSION@");
