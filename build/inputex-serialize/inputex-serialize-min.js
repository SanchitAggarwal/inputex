YUI.add("inputex-serialize",function(e,t){var n=e.Lang,r=e.inputEx;r.SerializeField=function(e){r.SerializeField.superclass.constructor.call(this,e)},e.extend(r.SerializeField,r.Field,{setOptions:function(e){r.SerializeField.superclass.setOptions.call(this,e),this.options.className=e.className||"inputEx-SerializedField",this.options.subfield=e.subfield||{type:"string"},this.options.serializer=e.serializer||"json"},renderComponent:function(){this.subfieldWrapper=r.cn("div",{className:"inputEx-SerializedField-SubFieldWrapper"}),this.fieldContainer.appendChild(this.subfieldWrapper);var t={parentEl:this.subfieldWrapper};e.mix(t,this.options.subfield),this.subField=r(t,this)},initEvents:function(){r.SerializeField.superclass.initEvents.call(this),this.subField.on("updated",this.fireUpdatedEvt,this,!0)},getValue:function(){var e=this.subField.getValue();return this.serialize(e)},setValue:function(e,t){var n=this.deserialize(e);this.subField.setValue(n,t)},serialize:function(e){return r.SerializeField.serializers[this.options.serializer].serialize(e)},deserialize:function(e){return r.SerializeField.serializers[this.options.serializer].deserialize(e)},focus:function(){this.subField.focus()}}),r.SerializeField.serializers={json:{serialize:function(t){return e.JSON.stringify(t)},deserialize:function(t){return e.JSON.parse(t)}},xml:{serialize:function(t){if(!XML||!e.Lang.isFunction(XML.ObjTree))return alert("ObjTree.js not loaded."),null;var n=new XML.ObjTree;return n.writeXML(t)},deserialize:function(t){if(!XML||!e.Lang.isFunction(XML.ObjTree))return alert("ObjTree.js not loaded."),null;var n=new XML.ObjTree,r=n.parseXML(t);return r}}},r.registerType("serialize",r.SerializeField,[{type:"type",label:"SubField",name:"subfield"},{type:"select",name:"serializer",label:"Serializer",choices:[{value:"json"},{value:"xml"}],value:"json"}])},"@VERSION@",{requires:["inputex-string","json"],ix_provides:"serialize"});
