YUI.add("inputex-linkedcombo",function(e,t){var n=e.Lang;inputEx=e.inputEx,inputEx.LinkedComboField=function(e){inputEx.LinkedComboField.superclass.constructor.call(this,e),n.isUndefined(this.options.value)&&this.setValue(this.getValue(),!1)},e.extend(inputEx.LinkedComboField,inputEx.Field,{setOptions:function(e){inputEx.LinkedComboField.superclass.setOptions.call(this,e),this.options.choices=n.isArray(e.choices)?e.choices:[],this.options.valueSeparator=e.valueSeparator||"_"},renderComponent:function(){var e,t,r,i,s,o,u,a,f,l;this.valuesMatching={},f=function(e,t){return e=n.isObject(e)?e.value:e,t=n.isObject(t)?t.value:t,e===t},l=[];for(e=0,r=this.options.choices.length;e<r;e+=1){u=n.isObject(this.options.choices[e])?this.options.choices[e].value:this.options.choices[e],s=this.options.choices[e].choices,this.valuesMatching[u]=[];if(s)for(t=0,i=s.length;t<i;t+=1)o=s[t],a=n.isObject(o)?o.value:o,this.valuesMatching[u].push(a),inputEx.indexOf(a,l,f)===-1&&l.push(s[t])}this.selects=[],this.selects.push(new inputEx.SelectField({choices:this.options.choices})),this.selects.push(new inputEx.SelectField({choices:l})),this.fieldContainer.appendChild(this.selects[0].getEl()),this.fieldContainer.appendChild(this.selects[1].getEl())},initEvents:function(){inputEx.LinkedComboField.superclass.initEvents.call(this),this.selects[0].on("updated",function(e){this.updateSecondSelectChoices(),this.selects[1].fireUpdatedEvt()},this,!0),this.selects[1].on("updated",function(e){this.setClassFromState(),this.fireUpdatedEvt()},this,!0)},updateSecondSelectChoices:function(){var e,t,n,r,i;r=this.valuesMatching[this.selects[0].getValue()],n=this.selects[1].choicesList;for(e=0,t=n.length;e<t;e+=1)i=n[e].value,inputEx.indexOf(i,r)===-1?this.selects[1].hideChoice({position:e},!1):this.selects[1].showChoice({position:e})},setValue:function(e,t){var n,r,i,s;n=e.split(this.options.valueSeparator),this.selects[0].setValue(n[0],!1),this.updateSecondSelectChoices(),this.selects[1].setValue(n[1],!1),inputEx.LinkedComboField.superclass.setValue.call(this,e,t)},getValue:function(){return this.selects[0].getValue()+this.options.valueSeparator+this.selects[1].getValue()},getState:function(){return this.getValue()===this.options.valueSeparator?this.options.required?inputEx.stateRequired:inputEx.stateEmpty:this.validate()?inputEx.stateValid:inputEx.stateInvalid}}),e.augment(inputEx.LinkedComboField,inputEx.mixin.choice),inputEx.registerType("linkedcombo",inputEx.LinkedComboField,[{type:"list",name:"choices",label:"Choices",elementType:{type:"group",fields:[{label:"Value",name:"value",value:""},{label:"Label",name:"label"},{type:"list",name:"choices",label:"Choices",elementType:{type:"group",fields:[{label:"Value",name:"value",value:""},{label:"Label",name:"label"}]},value:[],required:!0}]},value:[],required:!0}])},"@VERSION@",{requires:["inputex-select","inputex-choice"]});
