YUI.add("inputex-menu",function(h,e){var d=h.inputEx,g=h.Lang,a=h.substitute,c=h.Node.create,f="vertical",b="horizontal";d.MenuField=function(i){d.MenuField.superclass.constructor.call(this,i);};d.MenuField.MENU_TEMPLATE='<div class="yui3-menu" id="{menu_id}">'+'<div class="yui3-menu-content">'+"<ul>"+"{menu_items}"+"</ul>"+"</div>"+"</div>";d.MenuField.MENU_ITEM_TEMPLATE='<li class="{item_class}">'+'<a href="{href}" class="{label_class}">{label}</a>'+"{submenu}"+"</li>";h.extend(d.MenuField,d.Field,{setOptions:function(i){d.MenuField.superclass.setOptions.call(this,i);this.options.className=i.className?i.className:"inputEx-Field inputEx-MenuField";this.options.typeInvite=i.typeInvite||d.messages.menuTypeInvite;this.options.colorInvite=i.colorInvite||"FFFFFF";this.options.menuTrigger=i.menuTrigger||"click";this.options.menuOrientation=i.menuOrientation||f;this.options.menuItems=i.menuItems;this.options.menuConfig=i.menuConfig||{autoSubmenuDisplay:(this.options.menuTrigger=="mouseover")};},renderComponent:function(){this.hiddenEl=d.cn("input",{type:"hidden",name:this.options.name||"",value:this.options.value||""});this.fieldContainer.appendChild(this.hiddenEl);this.renderMenu(this.fieldContainer);this.setBackgroundColorOfRootLabel(this.options.colorInvite);},renderMenu:function(i){var k=this;this._textFromValue={};var j=function(s,l,r){if(r>5){throw new Error("MenuField : too much recursion, menuItems property should be 5 level deep at most.");}var n="",q=l.length,p,o,m;for(m=0;m<q;m++){p=l[m];if(g.isUndefined(p.text)&&!g.isUndefined(p.value)){p.text=p.value;}if(g.isUndefined(p.value)&&!g.isUndefined(p.text)){p.value=p.text;}o={label:p.text,href:"#"+p.value,submenu:"",label_class:"yui3-menuitem-content",item_class:p.classname};if(!g.isUndefined(p.submenu)){o.label_class="yui3-menu-label";o.submenu=j(p.value,p.submenu.itemdata,r+1);}else{o.item_class+=" yui3-menuitem";k._textFromValue[p.value]=p.text;}n+=a(d.MenuField.MENU_ITEM_TEMPLATE,o);}return a(d.MenuField.MENU_TEMPLATE,{menu_id:s,menu_items:n});};if(!this.options.menuItems){throw new Error("Missing 'menuItems' property in options");}this._menu=c(j(h.guid(),[{text:this.options.typeInvite,submenu:{itemdata:this.options.menuItems}}],0));if(this.options.menuOrientation===b){this._menu.addClass("yui3-menu-horizontal  yui3-menubuttonnav");}this._rootItemLabel=this._menu.one(".yui3-menu-label");if(this.options.menuOrientation===b){this._rootItemLabel.setContent("<em>"+this.options.typeInvite+"</em>");this._rootItemLabel=this._rootItemLabel.one("em");}this._menu.plug(h.Plugin.NodeMenuNav,this.options.menuConfig);this._menu.appendTo(i);},initEvents:function(){var i=this;this._menu.delegate("click",h.bind(this.onItemClick,this),"a");if(this.options.menuTrigger=="click"){this._menu.menuNav._rootMenu.on(["mousedown","click"],function(k){var j=i._menu.menuNav;j._toggleSubmenuDisplay.call(j,k);},this._menu.menuNav);}},setBackgroundColorOfRootLabel:function(i){this._menu.one(".yui3-menu-label").setStyle("backgroundColor",i);},onItemClick:function(k){var j=k.currentTarget,i;k.preventDefault();if(j.hasClass("yui3-menuitem-content")){i=j.getAttribute("href",2);this.setValue(i.substr(i.indexOf("#")+1),true);this._menu.menuNav._hideAllSubmenus(this._menu.menuNav._rootMenu);}},getValue:function(){return this.hiddenEl.value;},setValue:function(j,i){this._rootItemLabel.setContent(this._textFromValue[j]||this.options.typeInvite);this.hiddenEl.value=(!!this._textFromValue[j])?j:"";d.MenuField.superclass.setValue.call(this,j,i);}});d.registerType("menu",d.MenuField);},"@VERSION@",{"requires":["inputex-field","node-event-delegate","node-menunav","substitute"],"skinnable":true,"ix_provides":"menu"});