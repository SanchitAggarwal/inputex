YUI.add("inputex-menu",function(e,t){YUI.add("inputex-menu",function(e){var t=e.inputEx,n=e.Lang,r=e.substitute,i=e.Node.create,s="vertical",o="horizontal";t.MenuField=function(e){t.MenuField.superclass.constructor.call(this,e)},t.MenuField.MENU_TEMPLATE='<div class="yui3-menu" id="{menu_id}"><div class="yui3-menu-content"><ul>{menu_items}</ul></div></div>',t.MenuField.MENU_ITEM_TEMPLATE='<li class="{item_class}"><a href="{href}" class="{label_class}">{label}</a>{submenu}</li>',e.extend(t.MenuField,t.Field,{setOptions:function(e){t.MenuField.superclass.setOptions.call(this,e),this.options.className=e.className?e.className:"inputEx-Field inputEx-MenuField",this.options.typeInvite=e.typeInvite||t.messages.menuTypeInvite,this.options.colorInvite=e.colorInvite||"FFFFFF",this.options.menuTrigger=e.menuTrigger||"click",this.options.menuOrientation=e.menuOrientation||s,this.options.menuItems=e.menuItems,this.options.menuConfig=e.menuConfig||{autoSubmenuDisplay:this.options.menuTrigger=="mouseover"}},renderComponent:function(){this.hiddenEl=t.cn("input",{type:"hidden",name:this.options.name||"",value:this.options.value||""}),this.fieldContainer.appendChild(this.hiddenEl),this.renderMenu(this.fieldContainer)},renderMenu:function(s){var u=this;this._textFromValue={};var a=function(e,i,s){if(s>5)throw new Error("MenuField : too much recursion, menuItems property should be 5 level deep at most.");var o="",f=i.length,l,c,h;for(h=0;h<f;h++)l=i[h],n.isUndefined(l.text)&&!n.isUndefined(l.value)&&(l.text=l.value),n.isUndefined(l.value)&&!n.isUndefined(l.text)&&(l.value=l.text),c={label:l.text,href:"#"+l.value,submenu:"",label_class:"yui3-menuitem-content",item_class:l.classname},n.isUndefined(l.submenu)?(c.item_class+=" yui3-menuitem",u._textFromValue[l.value]=l.text):(c.label_class="yui3-menu-label",c.submenu=a(l.value,l.submenu.itemdata,s+1)),o+=r(t.MenuField.MENU_ITEM_TEMPLATE,c);return r(t.MenuField.MENU_TEMPLATE,{menu_id:e,menu_items:o})};this._menu=i(a(e.guid(),[{text:this.options.typeInvite,submenu:{itemdata:this.options.menuItems}}],0)),this.options.menuOrientation===o&&this._menu.addClass("yui3-menu-horizontal  yui3-menubuttonnav"),this._rootItemLabel=this._menu.one(".yui3-menu-label"),this.options.menuOrientation===o&&(this._rootItemLabel.setContent("<em>"+this.options.typeInvite+"</em>"),this._rootItemLabel=this._rootItemLabel.one("em")),this._menu.plug(e.Plugin.NodeMenuNav,this.options.menuConfig),this._menu.appendTo(s)},initEvents:function(){var t=this;this._menu.delegate("click",e.bind(this.onItemClick,this),"a"),this.options.menuTrigger=="click"&&this._menu.menuNav._rootMenu.on(["mousedown","click"],function(e){var n=t._menu.menuNav;n._toggleSubmenuDisplay.call(n,e)},this._menu.menuNav)},onItemClick:function(e){var t=e.currentTarget,n;e.preventDefault(),t.hasClass("yui3-menuitem-content")&&(n=t.getAttribute("href",2),this.setValue(n.substr(n.indexOf("#")+1),!0),this._menu.menuNav._hideAllSubmenus(this._menu.menuNav._rootMenu))},getValue:function(){return this.hiddenEl.value},setValue:function(e,n){this._rootItemLabel.setContent(this._textFromValue[e]||this.options.typeInvite),this.hiddenEl.value=this._textFromValue[e]?e:"",t.MenuField.superclass.setValue.call(this,e,n)}}),t.registerType("menu",t.MenuField)},"3.1.0",{requires:["inputex-field","node-event-delegate","node-menunav","substitute"]})},"@VERSION@");
