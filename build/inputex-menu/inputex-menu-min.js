YUI.add("inputex-menu",function(e,t){var n=e.inputEx,r=e.Lang,i=e.substitute,s=e.Node.create,o="vertical",u="horizontal";n.MenuField=function(e){n.MenuField.superclass.constructor.call(this,e)},n.MenuField.MENU_TEMPLATE='<div class="yui3-menu" id="{menu_id}"><div class="yui3-menu-content"><ul>{menu_items}</ul></div></div>',n.MenuField.MENU_ITEM_TEMPLATE='<li class="{item_class}"><a href="{href}" class="{label_class}">{label}</a>{submenu}</li>',e.extend(n.MenuField,n.Field,{setOptions:function(t){n.MenuField.superclass.setOptions.call(this,t),this.messages=e.mix(this.messages,e.Intl.get("inputex-menu")),this.options.className=t.className?t.className:"inputEx-Field inputEx-MenuField",this.options.typeInvite=t.typeInvite||this.messages.menuTypeInvite,this.options.menuTrigger=t.menuTrigger||"click",this.options.menuOrientation=t.menuOrientation||o,this.options.menuItems=t.menuItems,this.options.constrained=t.constrained||!1,this.options.menuConfig=t.menuConfig||{autoSubmenuDisplay:this.options.menuTrigger==="mouseover"}},renderComponent:function(){this.hiddenEl=n.cn("input",{type:"hidden",name:this.options.name||"",value:this.options.value||""}),this.fieldContainer.appendChild(this.hiddenEl),this.renderMenu(this.fieldContainer)},renderMenu:function(t){this._textFromValue={},this._valueFromHref={};var o=this,a,f=function(t,s,u){if(u>5)throw new Error("MenuField : too much recursion, menuItems property should be 5 level deep at most.");var a="",l=s.length,c,h,p,d;for(d=0;d<l;d++)c=s[d],p=e.guid(),h={label:c.text,href:"#"+p,submenu:"",label_class:"yui3-menuitem-content",item_class:c.classname||""},r.isUndefined(c.submenu)?(h.item_class+=" yui3-menuitem",o._textFromValue[c.value]=c.text,o._valueFromHref["#"+p]=c.value):(h.label_class="yui3-menu-label",h.submenu=f(p,c.submenu.itemdata,u+1),h.item_class+=" yui3-submenu"),a+=i(n.MenuField.MENU_ITEM_TEMPLATE,h);return i(n.MenuField.MENU_TEMPLATE,{menu_id:t,menu_items:a})};if(!this.options.menuItems)throw new Error("Missing 'menuItems' property in options");this._menu=s(f(e.guid(),[{text:this.options.typeInvite,submenu:{itemdata:this.options.menuItems}}],0)),e.UA.ie===7&&(a=this._menu.all("a"),a.each(function(e){var t=e.get("href");e.set("href","#"+t.split("#")[1])})),this.options.menuOrientation===u&&this._menu.addClass("yui3-menu-horizontal yui3-menubuttonnav"),this.options.constrained&&this._menu.addClass("yui3-menu-constrained"),this._rootItemLabel=this._menu.one(".yui3-menu-label").setContent("<em>"+this.options.typeInvite+"</em>").one("em"),this._menu.plug(e.Plugin.NodeMenuNavImproved,this.options.menuConfig),this._menu.appendTo(t)},initEvents:function(){this._menu.delegate("click",e.bind(this.onItemClick,this),"a")},onItemClick:function(e){var t=e.currentTarget,n;e.preventDefault(),t.hasClass("yui3-menuitem-content")&&(n=t.getAttribute("href",2),this.setValue(this._valueFromHref[n],!0),this._menu.menuNav._hideAllSubmenus(this._menu.menuNav._rootMenu))},getValue:function(){return this.hiddenEl.value},setValue:function(e,t){this._rootItemLabel.setContent(this._textFromValue[e]||this.options.typeInvite),this.hiddenEl.value=this._textFromValue[e]?e:"",n.MenuField.superclass.setValue.call(this,e,t)}}),n.registerType("menu",n.MenuField)},"@VERSION@",{requires:["inputex-field","node-event-delegate","node-menunav-improved","substitute"],skinnable:!0,ix_provides:"menu",lang:["en","fr","de","ca","es","fr","it","nl"]});
