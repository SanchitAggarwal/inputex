YUI.add("inputex-map",function(e,t){YUI.add("inputex-map",function(e){var t=e.Lang,n=e.inputEx;n.MapFieldGlobals={yahoo_preloader_error:1,lat:43.648565,lon:-79.385329,uzoom:-13,api:"google",api_key:""},n.MapField=function(e){n.MapField.superclass.constructor.call(this,e)},e.extend(n.MapField,n.Field,{setOptions:function(e){n.MapField.superclass.setOptions.call(this,e),this.options.className=e.className||"inputEx-Field inputEx-MapField",this.options.width=e.width||"400px",this.options.height=e.height||"400px",this.options.loading=e.loading||"loading....",this.options.lat=e.lat||n.MapFieldGlobals.lat,this.options.lon=e.lon||n.MapFieldGlobals.lon,this.options.uzoom=e.uzoom||n.MapFieldGlobals.uzoom,this.options.api=e.api||n.MapFieldGlobals.api,this.options.api_key=e.api_key||n.MapFieldGlobals.api_key,this.options.mapType=e.mapType||n.MapFieldGlobals.mapType},renderComponent:function(){n.MapFieldsNumber?n.MapFieldsNumber++:n.MapFieldsNumber=0,this.options.api="google";var e="inputEx-MapField-"+n.MapFieldsNumber,t="inputEx-MapFieldWrapper-"+n.MapFieldsNumber,r="inputEx-MapFieldLat-"+n.MapFieldsNumber,i="inputEx-MapFieldLon-"+n.MapFieldsNumber,s="inputEx-MapFieldUZoom-"+n.MapFieldsNumber;this.elWrapper=n.cn("div",{id:t,style:"width: "+this.options.width+"; height: "+this.options.height},null,null),this.fieldContainer.appendChild(this.elWrapper),this.el=n.cn("div",{id:e,style:"position: relative; width: "+this.options.width+"; height: "+this.options.height},null,this.options.loading),this.elWrapper.appendChild(this.el),this.elLat=n.cn("input",{id:r,type:"hidden",value:this.options.lat}),this.fieldContainer.appendChild(this.elLat),this.elLon=n.cn("input",{id:i,type:"hidden",value:this.options.lon}),this.fieldContainer.appendChild(this.elLon),this.elZoom=n.cn("input",{id:s,type:"hidden",value:this.options.uzoom}),this.fieldContainer.appendChild(this.elZoom);var o={center:new google.maps.LatLng(this.options.lat,this.options.lon),zoom:this.options.uzoom,mapTypeId:google.maps.MapTypeId[this.options.mapType]};this.map=new google.maps.Map(this.el,o)},initEvents:function(){var e=this;google.maps.event.addListener(this.map,"click",function(t){e.setValue({lat:t.latLng.Xa,lon:t.latLng.Ya,uzoom:e.map.getZoom()}),this.marker?this.marker.setPosition(t.latLng):this.marker=new google.maps.Marker({position:t.latLng,map:e.map,title:"Hello World!"})})},setValue:function(e){e.uzoom&&(this.elZoom.value=e.uzoom),e.lat&&(this.elLat.value=e.lat),e.lon&&(this.elLon.value=e.lon)},getValue:function(){return this.elLat?{lat:this.elLat.value,lon:this.elLon.value,uzoom:this.elZoom.value}:{}}}),n.registerType("map",n.MapField)},"3.1.0",{requires:["inputex-field"]})},"@VERSION@");
