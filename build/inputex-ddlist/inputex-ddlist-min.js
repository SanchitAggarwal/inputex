YUI.add("inputex-ddlist",function(e,t){var n=e.Lang,r=e.inputEx,i=e.Node.create,s=e.substitute,o;o=function(e){o.superclass.constructor.call(this,e)},o.LIST_TEMPLATE='<ul class="inputEx-ddlist">{items}</ul>',o.LIST_ITEM_CLASS="inputEx-ddlist-item",o.LIST_ITEM_TEMPLATE='<li class="{class}"><span class="inputEx-ddlist-item-label">{label}</span><input type="hidden" name="{name}" value="{value}" /></li>',e.extend(o,r.Field,{setOptions:function(t){o.superclass.setOptions.call(this,t),this.options.items=n.isArray(t.items)?t.items:[],this.options.valueKey=t.valueKey||"value",this.options.labelKey=t.labelKey||"label",this.options.name=t.name||e.guid(),this.options.name.substr(-2)!=="[]"&&(this.options.name+="[]")},renderComponent:function(){var t,n;t=e.Array.reduce(this.options.items,"",this.renderListItem,this),t=s(o.LIST_TEMPLATE,{items:t}),n=i(t),n.appendTo(this.fieldContainer),this.sortable=new e.Sortable({container:n,nodes:"."+o.LIST_ITEM_CLASS,opacity:".1"}),this.sortable.delegate.dd.on("drag:end",function(e){this.fireUpdatedEvt()},this)},renderListItem:function(e,t){return e+s(o.LIST_ITEM_TEMPLATE,{"class":o.LIST_ITEM_CLASS,value:t[this.options.valueKey],label:t[this.options.labelKey],name:this.options.name})},addItem:function(t){var n=this.sortable.get("container"),r=this.renderListItem("",t),i=e.Node.create(r);n.append(i),this.sortable.sync()},removeItem:function(e){this.sortable.sync()},getValue:function(){return e.one(this.fieldContainer).all("."+o.LIST_ITEM_CLASS+" input").get("value")}}),r.DDListField=o,r.registerType("ddlist",o)},"@VERSION@",{requires:["inputex-field","array-extras","sortable","substitute"]});
